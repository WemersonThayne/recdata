<?xml version="1.0" encoding="utf-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">

	<div id='cadastraritem-form'>
		<div class='inside'>

			<h1>Buscar Item</h1>			

			<!-- Progress -->
			<p:ajaxStatus onstart="PF('statusDialog').show();" onsuccess="PF('statusDialog').hide();"/>  

			<p:dialog modal="true" widgetVar="statusDialog" header="Status"   
					draggable="false" closable="false">  
				<p:graphicImage value="imagens/progress.gif" />  
			</p:dialog>
			
			<!-- Formulário -->
			<h:form>
				<h:messages id="messagesBuscarItem" globalOnly="true" />
				<h:panelGrid columns="1">
					
					<!-- Nome do Item -->
					<h:outputLabel value="Item" for="descricaoItem" />
					<h:inputText class="defaultBoxRadius" id="descricaoItem"
						value="#{listarItensBean.descricaoItem}" size="45"
						required="true">
						<f:validateLength maximum="45" />
						<p:ajax event="keyup" update="itens" listener="#{listarItensBean.listarItens}"></p:ajax>
					</h:inputText>
					<h:message for="descricaoItem" />					
				</h:panelGrid>
								
				<!-- Listagem dos itens-->
				<p:dataScroller value="#{listarItensBean.itens}" var="item" chunkSize="10" id="itens">
			        <f:facet name="header">
			            Lista dos itens
			        </f:facet>
			 
			        <h:panelGrid columns="3" columnClasses="logo, detail, link">
			            
			            <p:graphicImage value="resources/imagens/missingphoto.png"/> 
			 
			            <p:outputPanel>
			                <h:panelGrid columns="1">
			                    <h:outputText value="Descrição:" />
			                    <h:outputText value="#{item.descricaoItem}"/>
			 
			                    <h:outputText value="Categoria:" />
			                    <h:outputText value="#{item.categoria.descricaoCategoria}"/>
			                </h:panelGrid>
			            </p:outputPanel>
			            
			            <p:commandLink id="reservarItemLink" actionListener="#{listarItensBean.reservarItem(item)}" ajax="false">
        					<h:outputText value="Reservar" />
    					</p:commandLink>
			        </h:panelGrid>
			    </p:dataScroller>
			</h:form>
		</div>
	</div>
</ui:composition>